# WireGuard configuration for <%= node_name %>
# Generated by messhy

[Interface]
Address = <%= interface_ip %>/<%= prefix_length %>
PrivateKey = <%= private_key %>
ListenPort = <%= listen_port %>
MTU = <%= mtu %>

# Enable IP forwarding
PostUp = sysctl -w net.ipv4.ip_forward=1
PostDown = sysctl -w net.ipv4.ip_forward=0

<% peers.each do |peer| %>
# Peer: <%= peer[:name] %>
[Peer]
PublicKey = <%= peer[:public_key] %>
PresharedKey = <%= peer[:preshared_key] %>
AllowedIPs = <%= peer[:allowed_ips] %>
Endpoint = <%= peer[:endpoint] %>
PersistentKeepalive = <%= peer[:keepalive] %>

<% end %>

